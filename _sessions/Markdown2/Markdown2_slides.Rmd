---
title: "Advanced Markdown"
author: "Reporting mit R<br>
  <a href='https://therbootcamp.github.io'>
    The R Bootcamp
  </a>
  <br>
  <a href='https://therbootcamp.github.io/RmR_2020Jun/'>
    <i class='fas fa-clock' style='font-size:.9em;'></i>
  </a>&#8239; 
  <a href='https://therbootcamp.github.io'>
    <i class='fas fa-home' style='font-size:.9em;' ></i>
  </a>&#8239;
  <a href='mailto:therbootcamp@gmail.com'>
    <i class='fas fa-envelope' style='font-size: .9em;'></i>
  </a>&#8239;
  <a href='https://www.linkedin.com/company/basel-r-bootcamp/'>
    <i class='fab fa-linkedin' style='font-size: .9em;'></i>
  </a>"
date: "Juni 2020"
output:
  xaringan::moon_reader:
    css: ["default", "baselrbootcamp.css"]
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: '16:9'
---

layout: true

<div class="my-footer">
  <span style="text-align:center">
    <span> 
      <img src="https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/by-sa.png" height=14 style="vertical-align: middle"/>
    </span>
    <a href="https://therbootcamp.github.io/">
      <span style="padding-left:82px"> 
        <font color="#7E7E7E">
          www.therbootcamp.com
        </font>
      </span>
    </a>
    <a href="https://therbootcamp.github.io/">
      <font color="#7E7E7E">
       Reporting mit R | Juni 2020
      </font>
    </a>
    </span>
  </div> 

---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
options(width = 110)
options(digits = 4)

# Load packages
require(tidyverse)
require(knitr)
require(stargazer)
require(kable)
require(kableExtra)

# load color set
source("../../_materials/palette/therbootcamp_palettes.R")

# knitr options
knitr::opts_chunk$set(dpi = 300, 
                      echo = FALSE, 
                      warning = FALSE, 
                      fig.align = 'center', 
                      message= FALSE,
                      comment = NA)
# special print function: avoid if possible
print2 <- function(x, nlines=10,...) {
   cat(head(capture.output(print(x,...)), nlines), sep="\n")}

# load data
airbnb <- read_csv("1_Data/airbnb.csv")

```

# Was sind die Eigenschaften der Wohnungen?

In diesem Abschnitt wollen wir etwas mehr über die Wohnungen herausfinden.

Dazu werden wir die Einstellungen der chunks genauer betrachten, Tabellen und ein Inhaltsverzeichnis erstellen.

---

# Chunks und Tabellen

.pull-left4[
<ul>
  <li class="m1"><span>Welche chunk Optionen gibt es?</span></li>
  <li class="m2"><span>Tabellen </span></li> 

</ul>
]

.pull-right5[
]

---

# Feinheiten in den Chunk Einstellungen 

.pull-left4[
<ul>
  <li class="m1"><span> Ohne zusätzliche Angaben werden <high>Code</high> und <high>Ergebnisse</high> aus einem Chunk direkt angezeigt</span></li>  
</ul>

````markdown
{r}
airbnb <- 
  read_csv("1_Data/airbnb.csv")
airbnb
````

]

.pull-right5[

```{r eval = TRUE, echo = TRUE}
airbnb <- 
  read_csv("1_Data/airbnb.csv")
airbnb
```

]

---

# Feinheiten in den Chunk Einstellungen 

.pull-left4[
<ul>
  <li class="m1"><span> Ohne zusätzliche Angaben werden <high>Code</high> und <high>Ergebnisse</high> aus einem Chunk direkt angezeigt</span></li>  
  <li class="m2"><span> <highm>include = FALSE:</highm> Code und Ergebnisse werde nicht angezeigt</span></li>  
</ul>

````markdown
{r include = FALSE}
airbnb <- 
  read_csv("1_Data/airbnb.csv")
airbnb
````

Daten können im nächsten Chunk abgefragt werden! 

]

.pull-right5[

```{r echo = FALSE, eval = FALSE}
airbnb <- 
  read_csv("1_Data/airbnb.csv")
airbnb
```

]

---

# Feinheiten in den Chunk Einstellungen 

.pull-left4[
<ul>
  <li class="m1"><span> Ohne zusätzliche Angaben werden <high>Code</high> und <high>Ergebnisse</high> aus einem Chunk direkt angezeigt</span></li>  
  <li class="m2"><span> <highm>include = FALSE:</highm> Code und Ergebnisse werde <high>nicht</high> angezeigt</span></li>  
  <li class="m3"><span><highm>echo = FALSE</highm>: Code wird nicht angezeigt, <high>Ergebnisse werden gezeigt</high> </span></li>
</ul>

````markdown
{r echo = FALSE}
select(airbnb, Preis, 
               Erstellungsdatum)
````
]

.pull-right5[


```{r include = TRUE, echo = FALSE}
select(airbnb, Preis, Erstellungsdatum)
```

]

---

# Feinheiten in den Chunk Einstellungen 

.pull-left4[
<ul>
  <li class="m1"><span> Ohne zusätzliche Angaben werden <high>Code</high> und <high>Ergebnisse</high> aus einem Chunk direkt angezeigt</span></li>  
  <li class="m2"><span> <highm>include = FALSE:</highm> Code und Ergebnisse werde <high>nicht</high> angezeigt</span></li>  
  <li class="m3"><span><highm>echo = FALSE</highm>: Code wird nicht angezeigt, <high>Ergebnisse werden gezeigt</high> </span></li>
  <li class="m4"><span><highm>message = FALSE:</highm> Warnungen unterdrücken</span></li>
</ul>

````markdown
{r message = FALSE}
message('Alles erledigt!')
````

]

.pull-right5[

Message: TRUE
```{r message = TRUE}
message('Alles erledigt!')
```

Message: FALSE

```{r message = FALSE}
message('Alles erledigt!')
```
]

---

# Feinheiten in den Chunk Einstellungen 

.pull-left4[
<ul>
  <li class="m1"><span> Ohne zusätzliche Chunk Angaben werden Code und Ergebnisse angezeigt</span></li>  
  <li class="m2"><span> <highm>include = FALSE:</highm> Code und Ergebnisse werde nicht angezeigt</span></li>  
  <li class="m3"><span><highm>echo = FALSE</highm>: Code wird nicht angezeigt, <high>Ergebnisse werden gezeigt</high> </span></li>
  <li class="m4"><span><highm>message = FALSE:</highm> Warnungen unterdrücken</span></li>
  <li class="m5"><span><highm>fig.width </highm>= '...', <highm>fig.height</highm> = '...' (Default:  is fig.width = 7 and fig.height = 5)</span></li>
</ul>

````markdown
{r fig.width = 5, fig.height = 3}
ggplot(airbnb, 
aes(Erstellungsdatum, Preis)) +
geom_point() + 
theme_bw()
````

]

.pull-right5[

```{r fig.width = 5, fig.height = 3, dpi = 300}
ggplot(airbnb, 
aes(Erstellungsdatum, Preis)) +
geom_point() + 
theme_bw()
```
]


---

# Inhaltsverzeichnis  

.pull-left4[
<ul>
  <li class="m1"><span>Inhaltsverzeichnis anzeigen <high>toc: true</high> und die 'Tiefe' erhöhen <high>toc_depth: 2</high></li>
</ul>

````markdown
title: "Mein Demo"
author: "MSM"
date: "5/22/2020"
output:
  html_document:
    toc: true
    toc_depth: 2
````

]

.pull-right5[

<p align="center" width="100%">
  <img src="image/Markdown2_Toc2.png" alt="TOC depth" style="width:80%">
</p>
]

---

# Inhaltsverzeichnis  

.pull-left4[
<ul>
  <li class="m1"><span>Inhaltsverzeichnis anzeigen <high>toc: true</high> und die 'Tiefe' erhöhen <high>toc_depth: 2</high></li>
 <li class="m2"><span> Überschriften werden mit <high>number_sections: true</high> numeriert</span></li>
</ul>

````markdown
title: "Meine Demo"
author: "MSM"
date: "5/25/2020"
output:
  html_document:
    toc: true
     number_sections: true
```` 

]

.pull-right5[
<p align="center" width="100%">
  <img src="image/Markdown2_Enum.png" alt="TOC Demo" style="width:70%">
</p>

]

---

# Inhaltsverzeichnis  

.pull-left4[

<ul>
  <li class="m1"><span>Inhaltsverzeichnis anzeigen <high>toc: true</high> und die 'Tiefe' erhöhen <high>toc_depth: 2</high></li>
 <li class="m2"><span> Überschriften werden mit <high>number_sections: true</high> numeriert</span></li>
  <li class="m3"> <span>Inhaltsverzeichnis permament links anzeigen <high>toc_float: true</high></span></li>
</ul>

````markdown
title: "Mein Demo"
author: "MSM"
date: "5/25/2020"
output:
  html_document:
    toc: true
    toc_float: true
```` 
]

.pull-right5[

<p align="center" width="100%">
 <img src="image/Markdown2_Float.png" alt="TOC Demo" style="width:150%">
</p>
]

---

# Tabellen

.pull-left4[

<ul>
  <li class="m1"><span>Tabellen könne mit <highm>table()</highm> direkt ausgeben</span></li>
</ul>

```{r eval = TRUE, echo = FALSE}
df <- select(airbnb, 
             Preis, 
             Unterkunftsart) %>%
  slice(1:5)
```

````markdown
{r}
df <- select(airbnb, 
             Preis, 
             Unterkunftsart) 
table(df)
````
]

.pull-right5[

```{r eval = TRUE}
table(df)
```

]

---

# Tabellen

.pull-left4[
<ul>
  <li class="m1"><span>Tabellen könne mit <highm>table()</highm> direkt ausgeben</span></li>
  <li class="m2"><span>Schönere Darstellung ist mit <high>kable()</high> möglich </span></li>
</ul>


```{r eval = FALSE, echo = TRUE}
{r}
kable(df)
```
]

.pull-right5[

```{r}
df %>%
  kable()
```

]

---

# Tabellen

.pull-left4[
<ul>
  <li class="m1"><span>Tabellen könne mit <highm>table()</highm> direkt ausgeben</span></li>
  <li class="m2"><span>Schönere Darstellung ist mit <high>kable()</high> möglich </span></li>
  <li class="m3"><span><high>Spaltennamen</high> verändern und <high>Captions</high> einfügen </span></li>
</ul>

````Markdown
{r}
kable(
  df,
  col.names = c("M", "SD", 
                "M", "SD"),
  digits = 2,
  caption = "Mittelwert und 
             Standardabweichung"
  )
````

]

.pull-right5[

```{r eval = TRUE, echo = FALSE}
select(airbnb, 
       Preis, 
       Rating_gesamt) %>%
  summarise(av_Preis = mean(Preis),
            sd_Preis = sd(Preis),
            av_Rating = mean(Rating_gesamt, na.rm = TRUE),
            sd_Rating = sd(Rating_gesamt, na.rm = TRUE))
```

```{r eval = TRUE, echo = FALSE}
df <- select(airbnb, 
       Preis, 
       Rating_gesamt) %>%
  summarise(av_Preis = mean(Preis),
            sd_Preis = sd(Preis),
            av_Rating = mean(Rating_gesamt, na.rm = TRUE),
            sd_Rating = sd(Rating_gesamt, na.rm = TRUE))

kable(
  df,
  col.names = c("M", "SD", "M", "SD"),
  digits = 2,
  caption = "Mittelwert und Standardabweichung"
  )
```

]

---

# Tabellen

.pull-left4[
<ul>
  <li class="m1"><span>Tabellen könne mit <highm>table()</highm> direkt ausgeben</span></li>
  <li class="m2"><span>Schönere Darstellung ist mit <high>kable()</high> möglich </span></li>
  <li class="m3"><span><high>Spaltennamen</high> verändern und <high>Captions</high> einfügen </span></li>
</ul>

````Markdown
{r}
kable(
  df,
  col.names = c("M", "SD", 
                "M", "SD"),
  digits = 2,
  caption = "Mittelwert und 
             Standardabweichung"
  ) %>%
  add_header_above(
    header = c("Preis" = 2, 
               "Rating" = 2)
    ) 
````

]

.pull-right5[

```{r eval = TRUE, echo = FALSE}
select(airbnb, 
       Preis, 
       Rating_gesamt) %>%
  summarise(av_Preis = mean(Preis),
            sd_Preis = sd(Preis),
            av_Rating = mean(Rating_gesamt, na.rm = TRUE),
            sd_Rating = sd(Rating_gesamt, na.rm = TRUE))
```

```{r eval = TRUE, echo = FALSE}
df <- select(airbnb, 
       Preis, 
       Rating_gesamt) %>%
  summarise(av_Preis = mean(Preis),
            sd_Preis = sd(Preis),
            av_Rating = mean(Rating_gesamt, na.rm = TRUE),
            sd_Rating = sd(Rating_gesamt, na.rm = TRUE))

kable(
  df,
  col.names = c("M", "SD", "M", "SD"),
  digits = 2,
  caption = "Mittelwert und Standardabweichung"
  ) %>%
  add_header_above(
    header = c("Preis" = 2, "Rating" = 2)
    )
```

]

---

# Welche Faktoren bestimmen den Preis?

.pull-left4[
<ul>
  <li class="m1"><span>Regression mit <high>Vorhersage</high> von <high>Preis</high> durch die Anzahl der Schlafzimmer und das <high>Rating</high> eines Objektes.</span></li>
</ul>

```{r eval = TRUE, echo = FALSE}
model <- lm(Preis ~ Schlafzimmer +
                    Rating_gesamt, 
            data = airbnb)
```

````markdown
{r eval = TRUE, echo = TRUE}

model <- lm(Preis ~ Schlafzimmer + 
                    Rating_gesamt, 
            data = airbnb)
````

]

.pull-right5[

```{r echo = TRUE, evla = TRUE, options(width = 20)}
summary(model)
```
]

---

# Welche Faktoren bestimmen den Preis?

.pull-left4[
<ul>
  <li class="m1"><span>Regression mit <high>Vorhersage</high> von <high>Preis</high> durch die Anzahl der Schlafzimmer und das <high>Rating</high> eines Objektes.</span></li>
  <li class="m2"><span>Verbesserung des Layouts mit <highm>stargazer()</highm></span></li>
</ul>

```{r eval = TRUE, echo = FALSE}
model <- lm(Preis ~ Schlafzimmer + Rating_gesamt, 
            data = airbnb)
```

````markdown
{r results = 'asis'}

stargazer(model, 
          header=FALSE, 
          type="html",
          single.row = TRUE)
```
]

.pull-right5[

```{r results = 'asis'}
stargazer(model, 
          header=FALSE, 
          type="html",
          single.row = TRUE)
```

]

---


class: middle, center

<h1><a href="https://therbootcamp.github.io/RmR_2020Jun/_sessions/_Markdown2/Markdown2_practical.html">Practical</a></h1>

